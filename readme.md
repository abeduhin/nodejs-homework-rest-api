##  HW06-email

Для виконання домашньої роботи №6 створюємо гілку hw06-email з гілки master.

### Порядок виконання
1. Встановлюємо додатково пакети @sendgrid/mail.
2. Реєструємось на сайті https://app.sendgrid.com/ та верефікуємо свій email.
3. Отримаємо свій API ключ та зберігаємо його в файлі .env у змінній SENDGRID_API_KEY . 
2. Архитектура додатку.
 + Вносимо зміни в наступні папки:
      - models - типові шаблони інтерфейса (users-добавляємо поля verify та verificationToken та добавляємо verifyEmailSchema - для повторного запиту);
      - helpers - типові форми, які повторюються (загальний імпорт через файл index);
        + Створюємо sendEmails - універсальний обробник наших повідомлень
      - controllers - логика для усіх типів запросів (загальний імпорт через файл index).
         + До auth/register додаємо поле verificationToken та зміну mail(форму запиту на поштовий сервер SENDGRID ).
          - створюємо verificationToken через nanoid
          - записуємого його в базу даних до юзера
          - через email, який він вказав при реєстрації, відправляємо запит (посилання) на верифікацію email
          - користувач натискає на запит і переходить routes GET/api/users/verify/:verificationToken
         + Створюємо auth/verifyEmail (де по параметру verificationToken ми будемо шукати користувача в моделі User)
          - якщо користувач з таким токеном не знайдений, повертаємо помилку 'Not Found'
          - якщо користувач знайдений - встановлюємо verificationToken в "", а поле verify ставимо    рівним true в документі користувача і повертаємо успішну відповідь
         + Створюємо auth/resendEmail
          - де описуємо випадок, якщо перший запит не пройшов і потрібно відправити другий.
          - через email - шукаємо юзера
          - якщо юзера нема, або його email верифікований - то помилка
          - інше відправляємо запит на верифікацію.
  + Експортуємо дані в файл routes/api/users - де описуємо форму та шлях HTTP-запиту (users).
      - GET/api/users/verify/:verificationToken - по параметру verificationToken ми будемо шукати користувача в моделі User (controllers auth/verifyEmail)
      - POST/api/users/verify/ - повторний запит (verifyEmailSchema та controllers auth/resendEmail )
  + Експортуємо дані в кореневий файл api - де описуємо загальну інформацію.

  + Експортуємо дані в кореневий файл server - де робимо підключення наших HTTP-запитів .


### Команди:

- `npm start` &mdash; старт сервера в режимі production
- `npm run start:dev` &mdash; старт сервера в режимі розробки (development)
- `npm run lint` &mdash; запустити виконання перевірки коду з eslint, необхідно виконувати перед кожним PR та виправляти всі помилки лінтера
- `npm lint:fix` &mdash; та ж перевірка лінтера, але з автоматичними виправленнями простих помилок
